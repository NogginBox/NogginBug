var _ajax=function(){var asJson=function(text){if(!text)return null;try{return JSON.parse(text)}catch(e){return console.log(e),null}},ajxDelete=function(url,doneFunc){sendUsing("DELETE",url,doneFunc)},ajxGet=function(url,doneFunc){sendUsing("GET",url,doneFunc)},ajxPost=function(url,data,doneFunc){var x=new XMLHttpRequest,c;x.open("POST",url,!0);x.setRequestHeader("Content-Type","application/json");x.onreadystatechange=function(){this.readyState==4&&doneFunc(this.status,asJson(this.responseText),this)};c=JSON.stringify(data);x.send(c)},sendUsing=function(method,url,doneFunc){var x=new XMLHttpRequest;x.open(method,url,!0);x.onreadystatechange=function(){this.readyState==4&&doneFunc(this.status,asJson(this.responseText),this)};x.send()};return{"delete":ajxDelete,get:ajxGet,post:ajxPost}}(),_dom=function(d){var html=function(el){var _el=el,eachFunc=function(func){if(_el.length!==undefined&&_el.selectedIndex===undefined)for(var i=0;i<_el.length;i++)func(html(_el[i]));else func(html(_el))},eachProp=function(propName,value){for(var i=0;i<_el.length;i++)_el[i][propName]=value},checked=function(boolV){return boolV===undefined?_el.checked:(_el.checked=!!boolV,this)},classAdd=function(cName){return _el.classList?_el.classList.add(cName):eachFunc(function(el){el.classAdd(cName)}),this},classRemove=function(cName){return _el.classList?_el.classList.remove(cName):eachFunc(function(el){el.classRemove(cName)}),this},classToggle=function(cName){return _el.classList?_el.classList.contains(cName)?classRemove(cName):classAdd(cName):eachFunc(function(el){el.classToggle(cName)}),this},data=function(key,val){return prop("data-"+key,val)},dataObject=function(key){dKey=("data-"+key+"-").replace("--","-");var dPattern=new RegExp(dKey,"i"),d={};return[].forEach.call(_el.attributes,function(at){if(dPattern.test(at.name)){var val=at.value;try{val=JSON.parse(val)}catch(e){}d[at.name.substr(dKey.length)]=val}}),d},on=function(action,func,eventClosure){if(_el){var createHtmlFunc=function(c){var closure=c;return function(ev){var handled=func(html(ev.currentTarget),closure,ev);handled===!0&&ev.stopPropagation()}};return eachFunc(function(el){el.element.addEventListener(action,createHtmlFunc(eventClosure))}),this}},onchange=function(func,eventClosure){return on("change",func,eventClosure)},onclick=function(func,eventClosure){return on("click",func,eventClosure)},onmouseleave=function(func,eventClosure){return on("mouseleave",func,eventClosure)},onmouseover=function(func,eventClosure){return on("mouseover",func,eventClosure)},prop=function(key,val){return val===undefined?_el.getAttribute(key):(_el.setAttribute(key,val),this)},select=function(valFunc){for(var v,list=[],i=0;i<_el.length;i++)v=valFunc(html(_el[i])),v!==null&&v!==undefined&&list.push(v);return list},where=function(boolFunc){for(var list=[],i=0;i<_el.length;i++)boolFunc(html(_el[i]))&&list.push(_el[i]);return html(list)},val=function(v){return v?(_el.value=v,this):_el.value};return{checked:checked,classAdd:classAdd,classRemove:classRemove,classToggle:classToggle,data:data,dataObject:dataObject,eachFunc:eachFunc,eachProp:eachProp,element:_el,onchange:onchange,onclick:onclick,onmouseleave:onmouseleave,onmouseover:onmouseover,prop:prop,select:select,where:where,whereHasClass:whereHasClassFuncFactory(el),whereCssSelector:whereSelectorFuncFactory(el),val:val}},createA=function(innerHtml,onClick){var a=document.createElement("a");return a.innerHTML=innerHtml,a.onclick=onClick,html(a)},createP=function(innerHtml){var p=document.createElement("p");return p.innerHTML=innerHtml,html(p)},createDiv=function(innerHtml,cssClass){var p=document.createElement("div");return p.className=cssClass,p.innerHTML=innerHtml,html(p)},findId=function(id){return html(document.getElementById(id))},whereHasClassFuncFactory=function(el){return function(cName){return html(el.getElementsByClassName(cName))}},whereHasNameFuncFactory=function(el){return function(name){return html(el.querySelectorAll("[name="+name+"]"))}},whereSelectorFuncFactory=function(el){return function(selector){return html(el.querySelectorAll(selector))}};return{create:{a:createA,div:createDiv,p:createP},findId:findId,whereCssSelector:whereSelectorFuncFactory(d),whereHasClass:whereHasClassFuncFactory(d),whereHasName:whereHasNameFuncFactory(d)}}(document),_notify=function(){var show=function(cssClass){return function(msg){var notification=_dom.create.div(msg,"alert "+cssClass),main=_dom.findId("main").element;main.insertBefore(notification.element,main.firstChild)}};return{showSuccess:show("alert-success"),showError:show("alert-danger")}}();